<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* just to be sure these are full screen*/

        canvas {
            height: 97vh;
            width: 99vw;
        }

        /* To remove the scrollbars */
    </style>
</head>

<body>
    <canvas id="myCanvas" style="border:1px solid #000000;"></canvas>
    <script>
        const activation = (x) => x > 0 ? x : 0
        let arr
        let biases
        async function getData() {
            let n = await fetch('nodes.txt')
            let b = await fetch('biases.txt')
            arr = await n.json()
            biases = await b.json()
        }

        function componentToHex(c) {
            var hex = c.toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }

        function rgbToHex(r, g, b) {
            return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
        }

        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        canvas.width = document.body.scrollWidth
        canvas.height = document.body.scrollHeight
        console.log(canvas.width)
        console.log(canvas.height)/**/

        function drawLine(begin, end) {
            ctx.beginPath()
            ctx.moveTo(...begin)
            ctx.lineTo(...end)
            ctx.stroke()
        }


        function drawDot(y, x, size) {
            ctx.beginPath()
            ctx.arc(x, y, size, 0, 2 * Math.PI)
            ctx.stroke()
        }



        getData().then(() => {
            console.log(arr)
            console.log(biases)
            let c = Math.floor(255 / arr.length)
            let temp = canvas.height / arr.length
            let pos = temp / 2
            let col = 0

            arr.forEach((x, i) => {
                console.log(x)
                let t = canvas.width / x.length
                col += c
                let co = rgbToHex(col, 0, (255 - col))
                let p = t / 2
                x.forEach((y, ind) => {
                    ctx.strokeStyle = co
                    ctx.lineWidth = 0.125 * t
                    if (i > 0) {
                        try {
                            ctx.lineWidth = 0.125 * t / (3 / biases[i - 1][ind])
                        } catch { }
                    }
                    drawDot(pos, p, 0.25 * t)
                    if (i > 0) {
                        let te = canvas.width / arr[i - 1].length
                        let po = te / 2
                        arr[i - 1].forEach((l, index) => {
                            let n = y[index]
                            if (i != arr.length - 1) {

                            }
                            n = activation(n)
                            ctx.lineWidth = 0.05 * te * n
                            if (n != 0) {
                                drawLine([po, pos - temp], [p, pos])
                            }
                            po += te
                        })
                    }/**/
                    p += t
                })
                pos += temp
            })
            /**/
        })

    </script>
</body>

</html>